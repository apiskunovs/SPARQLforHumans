<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width">
    <title>SparqlForHumans.Blazor</title>
    <base href="/" />
    <!--<link href="css/bootstrap/bootstrap.min.css" rel="stylesheet" />-->
    <link href="css/site.css" rel="stylesheet" />
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
</head>
<body>
    <app>Loading...</app>

    <script src="_framework/blazor.server.js"></script>

    <script>

        window.autoCompleteElement = {

            setSourceFunction: function (elementRef, dotnetElementReference) {

                var _function = function(request, response) {
                    var list = dotnetElementReference.invokeMethodAsync("AutocompleteSourceDelegate", request.term);
                    list.then(function(x) {
                        response(x);
                    });
                };

                $(elementRef).autocomplete('option', 'source', _function);
            },

            setMinLength: function(elementRef, minLength) {

                $(elementRef).autocomplete('option', 'minLength', minLength);
            },

            setDelay: function(elementRef, delay) {
         
                $(elementRef).autocomplete('option', 'delay', delay);
            },

            initAutoComplete: function (elementRef) {

                $(elementRef).autocomplete({
                    source: ['Source function not set'],
                    minLength: 1,
                    delay: 400,
                    focus: function(event, ui) {
                        event.preventDefault();
                        $(this).val(ui.item.label);
                    }
                });
            },

            setSelect: function (elementRef, dotnetElementReference) {

                var _function = function (event, ui) {
                    event.preventDefault();
                    dotnetElementReference.invokeMethodAsync("OnSelectEventListener", ui.item.value);
                };

                $(elementRef).on("autocompleteselect", _function);

            }


        };
    </script>
</body>
</html>
